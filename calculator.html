<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pollution Calculator | Winchester Waste</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <style>
        .category-card {
            transition: all 0.3s ease;
        }
        .category-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .result-box {
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }
        .impact-meter {
            height: 30px;
            border-radius: 15px;
            overflow: hidden;
            margin: 15px 0;
        }
        .tip-card {
            border-left: 4px solid #28a745;
        }


        .fixed-icon-width {
            width: 50px; /* or whatever width fits your largest icon nicely */
            text-align: center; /* optional: center icon inside */
        }
</style>
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="index.html">Winchester Waste</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="ecological-impact.html">Ecological Impact</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="local-data.html">Local Data</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="waste-disposal.html">Waste Disposal</a>
                    </li>

                    <li class="nav-item">
                        <a class="nav-link active" href="calculator.html">Pollution Calculator</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <header class="secondary-header">
        <div class="container py-4">
            <h1>Trash Pollution Calculator</h1>
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="index.html">Home</a></li>
                    <li class="breadcrumb-item active">Pollution Calculator</li>
                </ol>
            </nav>
        </div>
    </header>

    <section class="container my-5">
        <div class="row">
            <div class="col-lg-8">
                <div class="card mb-4">
                    <div class="card-body">
                        <h2 class="card-title">Calculate Your Waste Footprint</h2>
                        <p class="card-text">Use this interactive calculator to estimate your household's waste footprint and its ecological impact on Winchester's environment. Answer the questions below as accurately as possible for the most precise results.</p>
                        
                        <form id="pollution-calculator">
                            <div class="accordion" id="calculatorAccordion">
                                <!-- Household Information -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingOne">
                                        <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                                            <i class="fas fa-home me-2"></i> Household Information
                                        </button>
                                    </h2>
                                    <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne">
                                        <div class="accordion-body">
                                            <div class="mb-3">
                                                <label for="householdSize" class="form-label">How many people live in your household?</label>
                                                <select class="form-select" id="householdSize">
                                                    <option value="1">1 person</option>
                                                    <option value="2">2 people</option>
                                                    <option value="3">3 people</option>
                                                    <option value="4">4 people</option>
                                                    <option value="5">5 people</option>
                                                    <option value="6">6+ people</option>
                                                </select>
                                            </div>
                                            <div class="mb-3">
                                                <label for="homeType" class="form-label">What type of home do you live in?</label>
                                                <select class="form-select" id="homeType">
                                                    <option value="apartment">Apartment</option>
                                                    <option value="townhouse">Townhouse</option>
                                                    <option value="single">Single Family Home</option>
                                                    <option value="multi">Multi-Family Home</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- General Waste -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingTwo">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                                            <i class="fas fa-trash-alt me-2"></i> General Waste
                                        </button>
                                    </h2>
                                    <div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo">
                                        <div class="accordion-body">
                                            <div class="mb-3">
                                                <label class="form-label">How many trash bags does your household typically fill per week?</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="trashBags" id="trashBags1" value="1" checked>
                                                    <label class="form-check-label" for="trashBags1">0-1 bags</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="trashBags" id="trashBags2" value="2">
                                                    <label class="form-check-label" for="trashBags2">2-3 bags</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="trashBags" id="trashBags3" value="3">
                                                    <label class="form-check-label" for="trashBags3">4-5 bags</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="trashBags" id="trashBags4" value="4">
                                                    <label class="form-check-label" for="trashBags4">6+ bags</label>
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label class="form-label">Do you use Winchester's transfer station?</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="wasteDisposal" id="transfer" value="transfer">
                                                    <label class="form-check-label" for="transfer">Transfer station</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Recycling Habits -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingThree">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                                            <i class="fas fa-recycle me-2"></i> Recycling Habits
                                        </button>
                                    </h2>
                                    <div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree">
                                        <div class="accordion-body">
                                            <div class="mb-3">
                                                <label class="form-label">How consistently does your household recycle these materials?</label>
                                                
                                                <div class="mb-2">
                                                    <label class="form-label">Paper & Cardboard</label>
                                                    <select class="form-select" id="recyclePaper">
                                                        <option value="4">Always (90-100%)</option>
                                                        <option value="3">Usually (60-90%)</option>
                                                        <option value="2">Sometimes (30-60%)</option>
                                                        <option value="1">Rarely (0-30%)</option>
                                                        <option value="0">Never</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-2">
                                                    <label class="form-label">Plastic Containers</label>
                                                    <select class="form-select" id="recyclePlastic">
                                                        <option value="4">Always (90-100%)</option>
                                                        <option value="3">Usually (60-90%)</option>
                                                        <option value="2">Sometimes (30-60%)</option>
                                                        <option value="1">Rarely (0-30%)</option>
                                                        <option value="0">Never</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-2">
                                                    <label class="form-label">Glass</label>
                                                    <select class="form-select" id="recycleGlass">
                                                        <option value="4">Always (90-100%)</option>
                                                        <option value="3">Usually (60-90%)</option>
                                                        <option value="2">Sometimes (30-60%)</option>
                                                        <option value="1">Rarely (0-30%)</option>
                                                        <option value="0">Never</option>
                                                    </select>
                                                </div>
                                                
                                                <div class="mb-2">
                                                    <label class="form-label">Metal/Aluminum</label>
                                                    <select class="form-select" id="recycleMetal">
                                                        <option value="4">Always (90-100%)</option>
                                                        <option value="3">Usually (60-90%)</option>
                                                        <option value="2">Sometimes (30-60%)</option>
                                                        <option value="1">Rarely (0-30%)</option>
                                                        <option value="0">Never</option>
                                                    </select>
                                                </div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">Do you compost food waste?</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="compost" id="compostYes" value="yes">
                                                    <label class="form-check-label" for="compostYes">Yes</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="compost" id="compostNo" value="no" checked>
                                                    <label class="form-check-label" for="compostNo">No</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Consumption Habits -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingFour">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                                            <i class="fas fa-shopping-cart me-2"></i> Consumption Habits
                                        </button>
                                    </h2>
                                    <div id="collapseFour" class="accordion-collapse collapse" aria-labelledby="headingFour">
                                        <div class="accordion-body">
                                            <div class="mb-3">
                                                <label class="form-label">How often do you use reusable shopping bags?</label>
                                                <select class="form-select" id="reusableBags">
                                                    <option value="4">Always</option>
                                                    <option value="3">Usually</option>
                                                    <option value="2">Sometimes</option>
                                                    <option value="1">Rarely</option>
                                                    <option value="0">Never</option>
                                                </select>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">How often do you purchase items with minimal or recyclable packaging?</label>
                                                <select class="form-select" id="minimalPackaging">
                                                    <option value="4">Always</option>
                                                    <option value="3">Usually</option>
                                                    <option value="2">Sometimes</option>
                                                    <option value="1">Rarely</option>
                                                    <option value="0">Never</option>
                                                </select>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">How often do you use single-use plastic items (straws, utensils, etc.)?</label>
                                                <select class="form-select" id="singleUsePlastic">
                                                    <option value="0">Daily</option>
                                                    <option value="1">Several times a week</option>
                                                    <option value="2">Once a week</option>
                                                    <option value="3">Rarely</option>
                                                    <option value="4">Never</option>
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Special Waste -->
                                <div class="accordion-item">
                                    <h2 class="accordion-header" id="headingFive">
                                        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                                            <i class="fas fa-exclamation-triangle me-2"></i> Special Waste
                                        </button>
                                    </h2>
                                    <div id="collapseFive" class="accordion-collapse collapse" aria-labelledby="headingFive">
                                        <div class="accordion-body">
                                            <div class="mb-3">
                                                <label class="form-label">How do you dispose of electronic waste (computers, phones, etc.)?</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="eWaste" id="eWasteRecycle" value="recycle">
                                                    <label class="form-check-label" for="eWasteRecycle">Take to e-waste recycling</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="eWaste" id="eWasteTrash" value="trash">
                                                    <label class="form-check-label" for="eWasteTrash">Put in regular trash</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="eWaste" id="eWasteStore" value="store" checked>
                                                    <label class="form-check-label" for="eWasteStore">Store at home</label>
                                                </div>
                                            </div>
                                            
                                            <div class="mb-3">
                                                <label class="form-label">How do you dispose of hazardous waste (batteries, paint, chemicals)?</label>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="hazardousWaste" id="hazardousWasteEvent" value="event">
                                                    <label class="form-check-label" for="hazardousWasteEvent">Take to hazardous waste collection events</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="hazardousWaste" id="hazardousWasteTrash" value="trash">
                                                    <label class="form-check-label" for="hazardousWasteTrash">Put in regular trash</label>
                                                </div>
                                                <div class="form-check">
                                                    <input class="form-check-input" type="radio" name="hazardousWaste" id="hazardousWasteStore" value="store" checked>
                                                    <label class="form-check-label" for="hazardousWasteStore">Store at home</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-grid gap-2 mt-4">
                                <button type="button" id="calculate-btn" class="btn btn-outline-primary btn-lg">Calculate My Impact</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div id="results" class="card mb-4 d-none">
                    <div class="card-body">
                        <h2 class="card-title">Your Waste Footprint Results</h2>
                        
                        <div class="result-box bg-light">
                            <h3>Sustainability Score: <span id="overall-score" class="text-primary">0</span>/100</h3>
                            <p>Your household waste has the following estimated impact:</p>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <h4>Annual Waste Generation</h4>
                                    <h5 class="text-danger"><span id="waste-amount">0</span> pounds</h5>
                                    <div class="impact-meter">
                                        <div id="waste-meter" class="progress-bar bg-danger" role="progressbar" style="width: 0%"></div>
                                    </div>
                                    <p class="small text-muted">Average Winchester household: 2,000 lbs/year</p>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <h4>Recycling Efficiency</h4>
                                    <h5 class="text-success"><span id="recycling-rate">0</span>%</h5>
                                    <div class="impact-meter">
                                        <div id="recycling-meter" class="progress-bar bg-success" role="progressbar" style="width: 0%"></div>
                                    </div>
                                    <p class="small text-muted">Average Winchester household: 35%</p>
                                </div>
                            </div>
                            
                            <div class="row">
                                <div class="col-md-6 mb-3">
                                    <h4>Landfill Impact</h4>
                                    <h5 class="text-primary"><span id="landfill-impact">0</span> cubic feet</h5>
                                    <div class="impact-meter">
                                        <div id="landfill-meter" class="progress-bar bg-primary" role="progressbar" style="width: 0%"></div>
                                    </div>
                                </div>
                                
                                <div class="col-md-6 mb-3">
                                    <h4>CO₂ Equivalent</h4>
                                    <h5 class="text-warning"><span id="co2-equivalent">0</span> lbs CO₂e</h5>
                                    <div class="impact-meter">
                                        <div id="co2-meter" class="progress-bar bg-warning" role="progressbar" style="width: 0%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h3>Environmental Impact Breakdown</h3>
                            <div class="mb-3">
                                <canvas id="impactChart" width="400" height="200"></canvas>
                            </div>
                            
                            <div class="card tip-card p-3 mb-3">
                                <h4 class="h5">Personalized Recommendations</h4>
                                <ul id="recommendations" class="list-group list-group-flush">
                                    <!-- Recommendations will be inserted here -->
                                </ul>
                            </div>
                            
                            <div class="d-grid gap-2">
                                <button id="recalculate-btn" class="btn btn-outline-primary">Recalculate</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-4">
                <div class="card mb-4">
                    <div class="card-header  text-dark">
                        <h3 class="h5 mb-0">How Your Waste Impacts Winchester</h3>
                    </div>
                    <div class="card-body">
                        <p>Your household waste has direct effects on our local environment. Here's how:</p>
                        <ul>
                            <li><strong>Water Quality:</strong> Improperly disposed waste can leach into Winchester's watersheds, affecting aquatic habitats and drinking water.</li>
                            <li><strong>Wildlife:</strong> Plastic pollution often enters natural areas, where it can harm local wildlife through ingestion or entanglement.</li>
                            <li><strong>Air Quality:</strong> Decomposing waste in landfills releases methane and other greenhouse gases that contribute to local air pollution.</li>
                            <li><strong>Land Use:</strong> More waste means more land needed for disposal, reducing natural habitat in our region.</li>
                        </ul>
                    </div>
                </div>  
                
                <div class="card mb-4">
                    <div class="card-header text-dark">
                        <h3 class="h5 mb-0">Take Action</h3>
                    </div>
                    <div class="card-body">
                        <div class="d-flex align-items-center mb-3">
                            <div class="flex-shrink-0 fixed-icon-width">
                                <i class="fas fa-leaf fa-2x text-success"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h4 class="h6">Join a Community Cleanup</h4>
                                <p class="mb-0">Help remove waste from Winchester's natural areas.</p>
                            </div>
                        </div>
                        
                        <div class="d-flex align-items-center mb-3">
                            <div class="flex-shrink-0 fixed-icon-width">
                                <i class="fas fa-hands-helping fa-2x text-success"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h4 class="h6">Volunteer as a Waste Wise Ambassador</h4>
                                <p class="mb-0">Help educate others about proper waste management.</p>
                            </div>
                        </div>
                        
                        <div class="d-flex align-items-center">
                            <div class="flex-shrink-0 fixed-icon-width">
                                <i class="fas fa-award fa-2x text-success"></i>
                            </div>
                            <div class="flex-grow-1 ms-3">
                                <h4 class="h6">Take the Zero Waste Challenge</h4>
                                <p class="mb-0">Commit to reducing your waste for 30 days.</p>

                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="card mb-4">
                    <div class="card-body">
                        <h3 class="h5">Why Your Actions Matter</h3>
                        <img src="https://i0.wp.com/commonwealthbeacon.org/wp-content/uploads/2016/05/Nips-e1547222186300.jpg?fit=1200%2C900&ssl=1&resize=350%2C200" alt="Local ecosystem impact of waste reduction" class="img-fluid rounded mb-3">
                        <p>Winchester's ecosystems are interconnected. Every bag of trash diverted from landfills helps preserve our local environment for future generations.</p>
                        <p>Share your results and challenge friends and family to calculate their own waste footprint!</p>
                        <div class="d-flex">
                            <a target="_blank" href="https://facebook.com" class="btn btn-sm btn-outline-primary me-2"><i class="fab fa-facebook-f"></i> Share</a>
                            <a target="_blank" href="https://x.com" class="btn btn-sm btn-outline-info me-2"><i class="fab fa-twitter"></i> Tweet</a>
                            <a target="_blank" href="https://instagram.com" class="btn btn-sm btn-outline-danger"><i class="fab fa-instagram"></i> Post</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h4>Winchester Waste</h4>
                    <p>An educational resource about trash pollution and ecological impact in Winchester.</p>
                </div>
                <div class="col-md-3">
                    <h5>Quick Links</h5>
                    <ul class="list-unstyled">
                        <li><a href="index.html" class="text-white">Home</a></li>
                        <li><a href="ecological-impact.html" class="text-white">Ecological Impact</a></li>
                        <li><a href="local-data.html" class="text-white">Local Data</a></li>
                        <li><a href="waste-disposal.html" class="text-white">Waste Disposal</a></li>
                        <li><a href="calculator.html" class="text-white">Pollution Calculator</a></li>
                    </ul>
                </div>
                <div class="col-md-3">
                    <h5>Contact</h5>
                    <p>
                    Email: conor@byrnefamily.com</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const calculatorForm = document.getElementById('pollution-calculator');
    const calculateBtn = document.getElementById('calculate-btn');
    const recalculateBtn = document.getElementById('recalculate-btn');
    const downloadBtn = document.getElementById('download-results-btn');
    const resultsSection = document.getElementById('results');
    let impactChart;
    
    const recommendations = {
        low_recycling: "Increase your recycling rate by setting up clearly labeled bins for paper, plastic, metal, and glass.",
        high_waste: "Reduce your waste generation by composting, choosing reusable products, and minimizing packaging.",
        single_use: "Replace single-use plastics with reusable items like bottles, bags, and utensils.",
        hazardous_waste: "Properly dispose of hazardous waste at Winchester's collection events.",
        e_waste: "Recycle electronics at Winchester's e-waste drop-off events.",
        no_compost: "Composting food waste reduces your landfill contribution significantly.",
        plastic_bags: "Use reusable shopping bags and recycle plastic bags at local collection points.",
        general: "Stay involved with Winchester’s sustainability programs and initiatives."
    };
    
    calculateBtn.addEventListener('click', function() {
        calculateFootprint();
    });
    
    recalculateBtn.addEventListener('click', function() {
        resultsSection.classList.add('d-none');
        window.scrollTo({ top: 0, behavior: 'smooth' });
    });
    
    downloadBtn.addEventListener('click', function() {
        downloadResults();
    });
    
    function calculateFootprint() {
        const householdSize = parseInt(document.getElementById('householdSize').value);
        const trashBags = parseInt(document.querySelector('input[name="trashBags"]:checked').value);

        const recyclePaper = parseInt(document.getElementById('recyclePaper').value);
        const recyclePlastic = parseInt(document.getElementById('recyclePlastic').value);
        const recycleGlass = parseInt(document.getElementById('recycleGlass').value);
        const recycleMetal = parseInt(document.getElementById('recycleMetal').value);

        const compost = document.querySelector('input[name="compost"]:checked').value;
        
        const reusableBags = parseInt(document.getElementById('reusableBags').value);
        const minimalPackaging = parseInt(document.getElementById('minimalPackaging').value);
        const singleUsePlastic = parseInt(document.getElementById('singleUsePlastic').value);

        const eWaste = document.querySelector('input[name="eWaste"]:checked').value;
        const hazardousWaste = document.querySelector('input[name="hazardousWaste"]:checked').value;

        let wasteAmount = 0;
        switch(trashBags) {
            case 1: wasteAmount = 15 * 52; break; // 0-1 bags ~15 lbs/week
            case 2: wasteAmount = 30 * 52; break; // 2-3 bags ~30 lbs/week
            case 3: wasteAmount = 50 * 52; break; // 4-5 bags ~50 lbs/week
            case 4: wasteAmount = 70 * 52; break; // 6+ bags ~70 lbs/week
        }
        
        wasteAmount = wasteAmount * (householdSize / 3);

        const recyclingScore = recyclePaper + recyclePlastic + recycleGlass + recycleMetal;
        const recyclingRate = Math.round((recyclingScore / 16) * 100);

        let landfillImpact = wasteAmount * 0.1 * (1 - (recyclingRate / 100));

        if (compost === 'yes') {
            landfillImpact *= 0.65; // composting reduces landfill impact by ~35%
        }

        let co2Equivalent = wasteAmount * 0.95 * (1 - (recyclingRate / 200)); // slightly more accurate at 0.95 lbs CO₂e per lb of trash

        const wasteScore = Math.max(0, 30 - (wasteAmount / 2000 * 30)); 
        const recyclingScore2 = (recyclingRate / 100) * 35; 
        const consumptionScore = ((reusableBags + minimalPackaging + singleUsePlastic) / 12) * 20;

        let specialWasteScore = 0;
        if (eWaste === 'recycle') specialWasteScore += 7;
        if (hazardousWaste === 'event') specialWasteScore += 8;

        const overallScore = Math.round(wasteScore + recyclingScore2 + consumptionScore + specialWasteScore);

        document.getElementById('overall-score').textContent = overallScore;
        document.getElementById('waste-amount').textContent = Math.round(wasteAmount);
        document.getElementById('recycling-rate').textContent = recyclingRate;
        document.getElementById('landfill-impact').textContent = Math.round(landfillImpact);
        document.getElementById('co2-equivalent').textContent = Math.round(co2Equivalent);

        document.getElementById('waste-meter').style.width = Math.min(100, (wasteAmount / 3000) * 100) + '%';
        document.getElementById('recycling-meter').style.width = recyclingRate + '%';
        document.getElementById('landfill-meter').style.width = Math.min(100, (landfillImpact / 300) * 100) + '%';
        document.getElementById('co2-meter').style.width = Math.min(100, (co2Equivalent / 2700) * 100) + '%';

        generateRecommendations(recyclingRate, wasteAmount, singleUsePlastic, hazardousWaste, eWaste, compost, reusableBags);
        createImpactChart(wasteAmount, recyclingRate, landfillImpact, co2Equivalent);

        resultsSection.classList.remove('d-none');
        resultsSection.scrollIntoView({ behavior: 'smooth' });
    }
    
    function generateRecommendations(recyclingRate, wasteAmount, singleUsePlastic, hazardousWaste, eWaste, compost, reusableBags) {
        const recommendationsList = document.getElementById('recommendations');
        recommendationsList.innerHTML = '';

        const userRecommendations = [];

        if (recyclingRate < 50) {
            userRecommendations.push(recommendations.low_recycling);
        }
        
        if (wasteAmount > 1600) {
            userRecommendations.push(recommendations.high_waste);
        }
        
        if (singleUsePlastic < 3) {
            userRecommendations.push(recommendations.single_use);
        }
        
        if (hazardousWaste !== 'event') {
            userRecommendations.push(recommendations.hazardous_waste);
        }
        
        if (eWaste !== 'recycle') {
            userRecommendations.push(recommendations.e_waste);
        }
        
        if (compost === 'no') {
            userRecommendations.push(recommendations.no_compost);
        }
        
        if (reusableBags < 3) {
            userRecommendations.push(recommendations.plastic_bags);
        }
        
        if (userRecommendations.length < 3) {
            userRecommendations.push(recommendations.general);
        }

        const topRecommendations = userRecommendations.slice(0, 5);
        
        topRecommendations.forEach(function(rec) {
            const li = document.createElement('li');
            li.className = 'list-group-item';
            li.innerHTML = `<i class="fas fa-check-circle text-success me-2"></i> ${rec}`;
            recommendationsList.appendChild(li);
        });
    }
    
    function createImpactChart(wasteAmount, recyclingRate, landfillImpact, co2Equivalent) {
    const ctx = document.getElementById('impactChart').getContext('2d');

    if (impactChart) {
        impactChart.destroy();
    }

    const normalizedWaste = Math.min(100, (wasteAmount / 3000) * 100);
    const normalizedLandfill = Math.min(100, (landfillImpact / 300) * 100);
    const normalizedCO2 = Math.min(100, (co2Equivalent / 2700) * 100);

    impactChart = new Chart(ctx, {
        type: 'radar',
        data: {
            labels: ['Waste Reduction', 'Recycling Rate', 'Landfill Reduction', 'Carbon Footprint Reduction'],
            datasets: [{
                label: 'Your Sustainability Score',
                data: [
                    100 - normalizedWaste,
                    recyclingRate,
                    100 - normalizedLandfill,
                    100 - normalizedCO2
                ],
                backgroundColor: 'rgba(0, 123, 255, 0.2)',
                borderColor: 'rgb(0, 123, 255)',
                pointBackgroundColor: 'rgb(0, 123, 255)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgb(0, 123, 255)'
            }, {
                label: 'Winchester Average',
                data: [35, 40, 35, 35],
                backgroundColor: 'rgba(255, 99, 132, 0.2)',
                borderColor: 'rgb(255, 99, 132)',
                pointBackgroundColor: 'rgb(255, 99, 132)',
                pointBorderColor: '#fff',
                pointHoverBackgroundColor: '#fff',
                pointHoverBorderColor: 'rgb(255, 99, 132)'
            }]
        },
        options: {
            elements: {
                line: {
                    borderWidth: 3
                }
            },
            scales: {
                r: {
                    angleLines: {
                        display: true
                    },
                    suggestedMin: 0,
                    suggestedMax: 100
                }
            }
        }
    });
}
    
    function downloadResults() {
        const overallScore = document.getElementById('overall-score').textContent;
        const wasteAmount = document.getElementById('waste-amount').textContent;
        const recyclingRate = document.getElementById('recycling-rate').textContent;
        const landfillImpact = document.getElementById('landfill-impact').textContent;
        const co2Equivalent = document.getElementById('co2-equivalent').textContent;

        let recommendationsText = '';
        const recommendationsItems = document.querySelectorAll('#recommendations li');
        recommendationsItems.forEach(function(rec, index) {
            recommendationsText += `${index + 1}. ${rec.textContent.trim()}\n`;
        });

        const content = `
Winchester Waste - Your Waste Footprint Results
==================================================
Date: ${new Date().toLocaleDateString()}

OVERALL SUSTAINABILITY SCORE: ${overallScore}/100

DETAILED RESULTS:
- Annual Waste Generation: ${wasteAmount} pounds
- Recycling Efficiency: ${recyclingRate}%
- Landfill Impact: ${landfillImpact} cubic feet
- CO₂ Equivalent: ${co2Equivalent} lbs CO₂e

PERSONALIZED RECOMMENDATIONS:
${recommendationsText}

Learn More:
Visit www.winchesterwastewise.org to explore more ways to make a difference!

© ${new Date().getFullYear()} Winchester WasteWise
`;

        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.style.display = 'none';
        a.href = url;
        a.download = 'WinchesterWaste_Results.txt';
        document.body.appendChild(a);
        a.click();

        window.URL.revokeObjectURL(url);
        document.body.removeChild(a);
    }
});

    </script>
</body>
</html>